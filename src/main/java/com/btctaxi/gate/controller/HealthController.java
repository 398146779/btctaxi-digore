package com.btctaxi.gate.controller;

import org.springframework.core.io.ByteArrayResource;
import org.springframework.core.io.Resource;
import org.springframework.http.MediaType;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

/**
 * SLB健康检测
 */
@RestController
@RequestMapping("/gate/health")
public class HealthController extends BaseController {
    @RequestMapping("/check")
    @Any
    public void check() {
    }

    @RequestMapping("/speed")
    @Any
    public ResponseEntity<Resource> speed() {
        byte[] bs = new byte[]{(byte) 0x89, 0x50, 0x4e, 0x47, 0x0d, 0x0a, 0x1a, 0x0a, 0x00, 0x00, 0x00,
                0x0d, 0x49, 0x48, 0x44, 0x52, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x01, 0x01,
                0x03, 0x00, 0x00, 0x00, 0x25, (byte) 0xdb, 0x56, (byte) 0xca, 0x00, 0x00, 0x00, 0x03, 0x50, 0x4c,
                0x54, 0x45, (byte) 0xff, (byte) 0xff, (byte) 0xff, (byte) 0xa7, (byte) 0xc4, 0x1b, (byte) 0xc8, 0x00, 0x00, 0x00, 0x0a, 0x49,
                0x44, 0x41, 0x54, 0x08, (byte) 0xd7, 0x63, 0x60, 0x00, 0x00, 0x00, 0x02, 0x00, 0x01, (byte) 0xe2,
                0x21, (byte) 0xbc, 0x33, 0x00, 0x00, 0x00, 0x00, 0x49, 0x45, 0x4e, 0x44, (byte) 0xae, 0x42, 0x60, (byte) 0x82};
        ByteArrayResource res = new ByteArrayResource(bs);
        return ResponseEntity.ok().contentLength(bs.length).contentType(MediaType.IMAGE_PNG).body(res);
    }
}